---
batch_connect:
  template: vnc
script:
  <%- if instance_size == "40core-desktop" -%>
  queue_name: "cpu"
  <%- end -%>
  <%- if instance_size == "gpu-desktop" -%>
  queue_name: "dgx2"
  <%- end -%>
  native:
    <%- if instance_size == "1core-desktop" -%>
    - "-J studio_desktop_1core"
    - "-n 1"
    <%- end -%>
    <%- if instance_size == "8core-desktop" -%>
    - "-J studio_desktop_8core"
    - "-n 8"
    <%- end -%>
    <%- if instance_size == "16core-desktop" -%>
    - "-J studio_desktop_16core"
    - "-n 16"
    <%- end -%>
    <%- if instance_size == "40core-desktop" -%>
    - "-J studio_desktop_40core"
    - "--exclusive"
    <%- end -%>
    <%- if instance_size == "gpu-desktop" -%>
    - "-J studio_desktop_gpu"
    - "-N 1"
    - "-n 6"
    - "--gres=gpu:1"
    <%- end -%>
